<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- Generated by Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home&#160;Page</span></a></li>
      <li><a href="_xE5_x8F_x91_xE7_x89_x88_xE8_xAF_xB4_xE6_x98_x8E.html"><span>Release&#160;Notes</span></a></li>
      <li><a href="_xE7_x8E_xAF_xE5_xA2_x83_xE9_x85_x8D_xE7_xBD_xAE.html"><span>Environment&#160;Configuration</span></a></li>
      <li><a href="_xE7_xBC_x96_xE7_xA8_x8B_xE5_xBC_x95_xE5_xAF_xBC.html"><span>Programming&#160;Guide</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="_xE7_x9B_xB8_xE6_x9C_xBA_xE5_x8F_x82_xE6_x95_xB0_xE8_x8A_x82_xE7_x82_xB9_xE8_xA1_xA8.html"><span>Camera&#160;Parameter&#160;Node&#160;Table</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F_xE6_xA6_x82_xE8_xA7_x88.html"><span>Sample&#160;Program&#160;Overview</span></a></li>
      <li><a href="_xE5_xB8_xB8_xE8_xA7_x81_xE9_x97_xAE_xE9_xA2_x98.html"><span>FAQs</span></a></li>
      <li><a href="_xE6_xB3_x95_xE5_xBE_x8B_xE5_xA3_xB0_xE6_x98_x8E.html"><span>Disclaimer</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">Image Processing</div> </div> </div> <div id="shortdesc"> <br />
 </div><div id="shortdesc">The SDK provides abundant image processing APIs for displaying image, saving image, converting pixel format, reforming image, recording, etc. After images are acquired, they can be transmitted into these APIs for image processing.</div><div id="shortdesc"> <br />
 </div><div id="shortdesc">This chapter includes:</div><div id="shortdesc"> <ul>
<li>
<a href="#render">Render Image</a> </li>
<li>
<a href="#save">Save Image</a> </li>
<li>
<a href="#pixelFormat">Pixel Format Transformation</a> </li>
<li>
<a href="#decode">Decode Image</a> </li>
<li>
<a href="#record">Record</a> </li>
<li>
<a href="#reconstruct">Divide Image via Multi-Light Control Feature</a> </li>
</ul>
</div><div> <div id="render"> <div class="mainparams"> <h2>Render Image</h2>
</div></div></div><div><div id="render"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div><div id="render"><div class="subparamswhite">After acquiring image, you can refer to the following sample code, and call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE6_xB8_xB2_xE6_x9F_x93.html#ga5f44d5b3c0280e0030c6af1f40542e9a" title="Display one frame of image (extended API 2).">MV_CC_DisplayOneFrameEx2()</a> to display the image on the specified window.</div></div></div><div><div id="render"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment">// 1. Get image data</span></div><div class="line"><a class="code" href="struct_m_v___c_c___i_m_a_g_e.html">MV_CC_IMAGE</a>  stImage = {0};</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gabbc1b35442c6143931edc0189a3432fb">nWidth</a> = stImageInfo.stFrameInfo.nExtendWidth;</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stImageInfo.stFrameInfo.nExtendHeight;</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadea006ae805402cd96d9f8548235da30">enPixelType</a> = stImageInfo.stFrameInfo.enPixelType;</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = stImageInfo.pBufAddr;</div><div class="line">stImage.nImageBufLen = stImageInfo.stFrameInfo.nFrameLenEx;</div><div class="line"></div><div class="line"><span class="comment">// 2. Configure rendering mode              </span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> enRenderMode = 0;</div><div class="line"></div><div class="line"><span class="comment">// 3. Display image</span></div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE6_xB8_xB2_xE6_x9F_x93.html#ga5f44d5b3c0280e0030c6af1f40542e9a">MV_CC_DisplayOneFrameEx2</a>(handle,(<span class="keywordtype">void</span>*)g_hwnd, &amp;stImage , enRenderMode);</div><div class="line">Check(nRet);</div></div><!-- fragment --> <ol>
<li>
Get width, height, pixel format, buffer and length of the image. </li>
<li>
Configure image rendering mode. Set the mode to 0 (default mode), indicating OpenGL mode. </li>
<li>
Render acquired image through specified mode via calling <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE6_xB8_xB2_xE6_x9F_x93.html#ga5f44d5b3c0280e0030c6af1f40542e9a" title="Display one frame of image (extended API 2).">MV_CC_DisplayOneFrameEx2()</a>. </li>
</ol>
</div><p> <br />
 </div> <div id="save"> <div class="mainparams"> <h2>Save Image</h2>
</div></div></div><div><div id="save"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div><div id="save"><div class="subparamswhite">You can save the image to the local or the memory.</div></div></div><div><div id="save"><div class="subparamswhite"> <ul>
<li>
To the local: Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#gae035e7dfab861d4d47b76710dacc429c" title="Save image to file (extended API 2).">MV_CC_SaveImageToFileEx2()</a>. </li>
<li>
To the memory: Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#gaf2f458d195ec3b6688cc0e51472e482c" title="Convert the original image data to picture and save the images to specific memory....">MV_CC_SaveImageEx3()</a>. </li>
</ul>
</div></div></div><div><div id="save"><div class="subparamswhite">The following sample code shows how to saves images as local BMP files.</div></div></div><div><div id="save"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment">// Save raw data as bmp image</span></div><div class="line"><span class="keywordtype">char</span> chImageName[IMAGE_NAME_LEN] = { 0 };</div><div class="line"><a class="code" href="struct_m_v___c_c___i_m_a_g_e.html">MV_CC_IMAGE</a> stImage;</div><div class="line">memset(&amp;stImage, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_m_v___c_c___i_m_a_g_e.html">MV_CC_IMAGE</a>));</div><div class="line"><a class="code" href="struct_m_v___c_c___s_a_v_e___i_m_a_g_e___p_a_r_a_m.html">MV_CC_SAVE_IMAGE_PARAM</a> stSaveImageParam;</div><div class="line">memset(&amp;stSaveImageParam, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_m_v___c_c___s_a_v_e___i_m_a_g_e___p_a_r_a_m.html">MV_CC_SAVE_IMAGE_PARAM</a>));</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadea006ae805402cd96d9f8548235da30">enPixelType</a> = stImageInfo.stFrameInfo.enPixelType;</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stImageInfo.stFrameInfo.nExtendWidth;</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gabbc1b35442c6143931edc0189a3432fb">nWidth</a> = stImageInfo.stFrameInfo.nExtendHeight;</div><div class="line">stImage.nImageBufLen = stImageInfo.stFrameInfo.nFrameLenEx;</div><div class="line">stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a> = stImageInfo.pBufAddr;</div><div class="line">stSaveImageParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga9e97c82636424e576989acc7f5b65e48">enImageType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga5435b1ff781839e7fb5d05f1e4d9bb07a5bfe37840beb201a49b7e6b2771afadc">MV_Image_Bmp</a>;</div><div class="line">stSaveImageParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga9301aca02e3916d423fde16e4cdd5527">iMethodValue</a> = 1;</div><div class="line">stSaveImageParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga921cfd09cc71bb112daaa7ae5a71471c">nQuality</a> = 99;</div><div class="line">sprintf_s(chImageName, IMAGE_NAME_LEN, <span class="stringliteral">&quot;InPut_w%d_h%d_fn%03d.bmp&quot;</span>, stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gabbc1b35442c6143931edc0189a3432fb">nWidth</a>, stImage.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2e4c6b811457a16b7033af6741cfb1db">nHeight</a>, stImageInfo.stFrameInfo.nFrameNum);</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#gae035e7dfab861d4d47b76710dacc429c">MV_CC_SaveImageToFileEx2</a>(handle, &amp;stImage, &amp;stSaveImageParam, chImageName);</div><div class="line">Check(nRet);</div></div><!-- fragment --> </div><p> <br />
 </div> <div id="pixelFormat"> <div class="mainparams"> <h2>Convert Pixel Format</h2>
</div></div></div><div><div id="pixelFormat"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div><div id="pixelFormat"><div class="subparamswhite">Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga36d02611e46d9c488cae6d2fe4eff262" title="Convert pixel format.">MV_CC_ConvertPixelTypeEx()</a> to convert image format into another pixel format.</div></div></div><div><div id="pixelFormat"><div class="subparamswhite"> </div></div></div><div><div id="pixelFormat"><div class="subparamswhite">For instance, you can transform Bayer to RGB/BGR. The interpolation to images in Bayer format supports several algorithms such as smoothing filter, Gamma correction, and CCM correction. Refer to details in <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html">Image Processing</a>.</div></div></div><div><div id="pixelFormat"><div class="subparamswhite"> </div></div></div><div><div id="pixelFormat"><div class="subparamswhite">The following sample code shows how to convert images to RGB Format.</div></div></div><div><div id="pixelFormat"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment">// Set interpolation method to equalization.</span></div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga83bb7439fb0f17b0805510bf887b017b">MV_CC_SetBayerCvtQuality</a>(handle, 1);</div><div class="line">Check(nRet);</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pConvertData = NULL;</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nConvertDataSize = 0;</div><div class="line">nConvertDataSize = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad8e3c34af41bf74a4628b8a456b37a77">nExtendWidth</a> * stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga7b663309abd055da59e6e496b1092985">nExtendHeight</a>* 3;</div><div class="line">pConvertData = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(nConvertDataSize);</div><div class="line"><span class="keywordflow">if</span> (NULL == pDataForRGB)</div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;pConvertData is null\n&quot;</span>);</div><div class="line">    <span class="keywordflow">break</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Pixel format conversion</span></div><div class="line"><a class="code" href="struct_m_v___c_c___p_i_x_e_l___c_o_n_v_e_r_t___p_a_r_a_m___e_x.html">MV_CC_PIXEL_CONVERT_PARAM_EX</a> stConvertParam = {0};</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gabbc1b35442c6143931edc0189a3432fb">nWidth</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad8e3c34af41bf74a4628b8a456b37a77">nExtendWidth</a>;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga7b663309abd055da59e6e496b1092985">nExtendHeight</a>;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga05701d86c4ae0bb4955dbb4bfbafebee">pSrcData</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad09dec12abbdf5f6b77c47105e7eaaa9">pBufAddr</a>;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga788363fe94292a9095c3db98ca86e355">nSrcDataLen</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga733999b9d4f3d252eb79df06f517b410">nFrameLenEx</a>;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6af584b61c57a08ee93ed39be605ba6f">enSrcPixelType</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadea006ae805402cd96d9f8548235da30">enPixelType</a>;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gab3d423dfc2e4facdbb48671b55e2a419">enDstPixelType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga94f17d82a2c13785d0085217e9204061a4781513f690167d0552c7ec207210fb0">PixelType_Gvsp_RGB8_Packed</a>;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga5e9f33d08e3321873d38b6cb60cd021b">pDstBuffer</a> = pConvertData ;</div><div class="line">stConvertParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadbd4a5ebaab5cca214c0f7bacee71676">nDstBufferSize</a> = nConvertDataSize ;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga36d02611e46d9c488cae6d2fe4eff262">MV_CC_ConvertPixelTypeEx</a>(handle, &amp;stConvertParam);</div><div class="line">Check(nRet);</div></div><!-- fragment --> </div><p> <br />
 </div> <div id="decode"> <div class="mainparams"> <h2>Decode Image</h2>
</div></div></div><div><div id="decode"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div><div id="decode"><div class="subparamswhite">Some cameras support encoding and compressing image. You can decode image through calling <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#gaf4afd4daffefd78f3b044f26d6151c33" title="Decode lossless compression stream into raw data.">MV_CC_HB_Decode()</a>.</div></div></div><div><div id="decode"><div class="subparamswhite"> <dl class="section attention"><dt>Attention</dt><dd>Check if the input image is complete before decoding. If some data packet of image is lost, the API will return the failure message. Check with nLostPacket (the number of packets lost in the current frame) in <a class="el" href="struct_m_v___f_r_a_m_e___o_u_t___i_n_f_o___e_x.html" title="Output frame Information.">MV_FRAME_OUT_INFO_EX</a> . If the value of nLostPacket is greater than 0, there is packet loss.</dd></dl>
</div></div></div><div><div id="decode"><div class="subparamswhite">The following sample code shows how to decode compressed image.</div></div></div><div><div id="decode"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pDstBuf = NULL;</div><div class="line"><a class="code" href="struct_m_v___f_r_a_m_e___o_u_t.html">MV_FRAME_OUT</a> stImageInfo = {0};</div><div class="line"><a class="code" href="struct_m_v___c_c___h_b___d_e_c_o_d_e___p_a_r_a_m.html">MV_CC_HB_DECODE_PARAM</a> stDecodeParam = {0};</div><div class="line"></div><div class="line"><span class="comment">// Check packet loss</span></div><div class="line"><span class="keywordflow">if</span> (0 == stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2dd610e3ddf8fe159344c569abeb3b3c">nLostPacket</a>)</div><div class="line">{</div><div class="line">    <span class="comment">// Lossless compression</span></div><div class="line">    stDecodeParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga01cabcdb6eb04d42ea699fc45bf21375">pSrcBuf</a> = stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad09dec12abbdf5f6b77c47105e7eaaa9">pBufAddr</a>;</div><div class="line">    stDecodeParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6860d280bb5b78e359935494d503b469">nSrcLen</a> = stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad6d9155e189b8aab2a81609a8b33c6dc">nFrameLen</a>;</div><div class="line">    <span class="keywordflow">if</span> (NULL == pDstBuf)</div><div class="line">    {</div><div class="line">        pDstBuf = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) * (nPayloadSize));</div><div class="line">        <span class="keywordflow">if</span> (NULL == pDstBuf)</div><div class="line">        {</div><div class="line">            printf(<span class="stringliteral">&quot;malloc pDsrData fail!\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    stDecodeParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga1774c62b15df4e2261e1ac46178ebd41">pDstBuf</a> = pDstBuf;</div><div class="line">    stDecodeParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaeb8e45ddda5f6b8657b4cf440e1e6517">nDstBufSize</a> = nPayloadSize;</div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#gaf4afd4daffefd78f3b044f26d6151c33">MV_CC_HB_Decode</a>(handle, &amp;stDecodeParam);</div><div class="line">    Check(nRet);</div><div class="line">}</div><div class="line"><span class="keywordflow">else</span></div><div class="line">{</div><div class="line">    printf(<span class="stringliteral">&quot;Frame [%d] lost packet [%d] \n&quot;</span>,stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6f8d00948b2d76ac8cd65fda0acc2ed6">nFrameNum</a>,stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2dd610e3ddf8fe159344c569abeb3b3c">nLostPacket</a>)</div><div class="line">}</div></div><!-- fragment --> </div><p> <br />
 </div> <div id="record"> <div class="mainparams"> <h2>Recording</h2>
</div></div></div><div><div id="record"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div><div id="record"><div class="subparamswhite">You can save the image received by the camera as recording file via SDK. The steps are as follows:</div></div></div><div><div id="record"><div class="subparamswhite"> <ol>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga5ce379b3cacbdb3cc551d70c69f56da3" title="Start recording.">MV_CC_StartRecord()</a> to start recording. You need to configure parameters required for recording. </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga7c1b82605f202400154a5e4060357d51" title="Input raw data for recording.">MV_CC_InputOneFrame()</a> to input image data repeatedly. </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga77e2e66bd64b230f63c8d1b529c89c15" title="Stop recording.">MV_CC_StopRecord()</a> to stop recording when you finish. </li>
</ol>
</div></div></div><div><div id="record"><div class="subparamswhite">The following sample code shows how to save image as recording file.</div></div></div><div><div id="record"><div class="subparamswhite"> <ol>
<li>
<p class="startli"></p>
<p class="interli">Start recording: Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga5ce379b3cacbdb3cc551d70c69f56da3" title="Start recording.">MV_CC_StartRecord()</a> to configure parameters that can be acquired via camera or image. The following sample code shows how to get parameters including width, height and pixel format from camera.</p>
<div class="fragment"><div class="line"><a class="code" href="struct_m_v___c_c___r_e_c_o_r_d___p_a_r_a_m.html">MV_CC_RECORD_PARAM</a> stRecordPar;</div><div class="line"><a class="code" href="struct_m_v_c_c___i_n_t_v_a_l_u_e.html">MVCC_INTVALUE</a> stParam = {0};</div><div class="line">nRet = <a class="code" href="group___xE5_xBA_x9F_xE5_xBC_x83_xE6_x8E_xA5_xE5_x8F_xA3.html#ga4c7fc34b34bb73d58076f7973c8ac69f">MV_CC_GetIntValue</a>(handle, <span class="stringliteral">&quot;Width&quot;</span>, &amp;stParam);</div><div class="line">Check(nRet);</div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga523c75b72da2a3bb32b97032f86c4703">nWidth</a> = stParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>;</div><div class="line"></div><div class="line">nRet = <a class="code" href="group___xE5_xBA_x9F_xE5_xBC_x83_xE6_x8E_xA5_xE5_x8F_xA3.html#ga4c7fc34b34bb73d58076f7973c8ac69f">MV_CC_GetIntValue</a>(handle, <span class="stringliteral">&quot;Height&quot;</span>, &amp;stParam);</div><div class="line">Check(nRet);</div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga33071a62b54a3c9a671a0fcbe4804f1a">nHeight</a> = stParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>;</div><div class="line"></div><div class="line"><a class="code" href="struct_m_v_c_c___e_n_u_m_v_a_l_u_e.html">MVCC_ENUMVALUE</a> stEnumValue = {0};</div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga2daf898feb1afa4bd5de232d85a33780">MV_CC_GetEnumValue</a>(handle, <span class="stringliteral">&quot;PixelFormat&quot;</span>, &amp;stEnumValue);</div><div class="line">Check(nRet);</div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadea006ae805402cd96d9f8548235da30">enPixelType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ga94f17d82a2c13785d0085217e9204061">MvGvspPixelType</a>(stEnumValue.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>);</div><div class="line"></div><div class="line"><a class="code" href="struct_m_v_c_c___f_l_o_a_t_v_a_l_u_e.html">MVCC_FLOATVALUE</a> stFloatValue;</div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga480e49d645f1638ce17da841ac72632c">MV_CC_GetFloatValue</a>(handle, <span class="stringliteral">&quot;ResultingFrameRate&quot;</span>, &amp;stFloatValue);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2ca76d943599df56308bf386dab44aa3">fFrameRate</a> = stFloatValue.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga11e278521f1696dee14451558c04673a">fCurValue</a>;</div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaf06250062037bfc0b602f7335f22e858">nBitRate</a> = 1000;</div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaa456e2f6d25272bd19b1e3a031573892">enRecordFmtType</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#gga2ca65d6aefb90111421bddafee42b6b1a92f8214d1fc5f2a223a05be40a9bab1b">MV_FormatType_AVI</a>;</div><div class="line">stRecordPar.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga0dbaa617c548ea19e6b24a480f79ae1c">strFilePath</a>= <span class="stringliteral">&quot;./Recording.avi&quot;</span>;</div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga5ce379b3cacbdb3cc551d70c69f56da3">MV_CC_StartRecord</a>(handle, &amp;stRecordPar);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
<li>
<p class="startli"></p>
<p class="interli">Input camera to recording: Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga7c1b82605f202400154a5e4060357d51" title="Input raw data for recording.">MV_CC_InputOneFrame()</a> repeatedly to input image data from camera.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> __stdcall WorkThread(<span class="keywordtype">void</span>* handle)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> nRet = <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>;</div><div class="line">    <a class="code" href="struct_m_v___f_r_a_m_e___o_u_t.html">MV_FRAME_OUT</a> stImageInfo = {0};</div><div class="line">    <a class="code" href="struct_m_v___c_c___i_n_p_u_t___f_r_a_m_e___i_n_f_o.html">MV_CC_INPUT_FRAME_INFO</a> stInputFrameInfo = {0};</div><div class="line">    <span class="keywordflow">while</span>(1)</div><div class="line">    {</div><div class="line">        nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#ga33331585a4e2a64653b74af66157a6d8">MV_CC_GetImageBuffer</a>(handle, &amp;stImageInfo, 1000);</div><div class="line">        <span class="keywordflow">if</span> (nRet == <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>)</div><div class="line">        {</div><div class="line">            printf(<span class="stringliteral">&quot;Get Image Buffer: Width[%d], Height[%d], FrameNum[%d]\n&quot;</span>, </div><div class="line">            stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga523c75b72da2a3bb32b97032f86c4703">nWidth</a>, stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga33071a62b54a3c9a671a0fcbe4804f1a">nHeight</a>, stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6f8d00948b2d76ac8cd65fda0acc2ed6">nFrameNum</a>);</div><div class="line">            stInputFrameInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaaf2599b3eef445bee5a6bd50569435f7">pData</a> = stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad09dec12abbdf5f6b77c47105e7eaaa9">pBufAddr</a>;</div><div class="line">            stInputFrameInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga437032205be38dd5298407ae8b4a2b87">nDataLen</a> = stImageInfo.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad6d9155e189b8aab2a81609a8b33c6dc">nFrameLen</a>;</div><div class="line">            nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga7c1b82605f202400154a5e4060357d51">MV_CC_InputOneFrame</a>(handle, &amp;stInputFrameInfo);</div><div class="line">            Check(nRet);</div><div class="line">            nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#gaeff416b2d35df148fa2e63521d8847d3">MV_CC_FreeImageBuffer</a>(handle, &amp;stImageInfo);</div><div class="line">            Check(nRet);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span>(g_bExit)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<p class="startli"></p>
<p class="interli">Stop recording: Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga77e2e66bd64b230f63c8d1b529c89c15" title="Stop recording.">MV_CC_StopRecord()</a> to stop recording.</p>
<div class="fragment"><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga77e2e66bd64b230f63c8d1b529c89c15">MV_CC_StopRecord</a>(handle);</div><div class="line">Check(nRet);</div></div><!-- fragment -->  </li>
</ol>
</div><p> <br />
 </div> <div id="reconstruct"> <div class="mainparams"> <h2>Divide Image via Multi-Light Control Feature</h2>
</div></div></div><div><div id="reconstruct"><div class="mainparams"> </div> <div class="subparamswhite"> <ul>
<li>
<div> <b>Divide Image via SDK</b> </div><div>Some cameras support multi-light control feature, and can send the entire multi-light control image to SDK. By calling <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga572580f794971d54980480eaf62180b7" title="Reconstruct the image (for time-division exposure).">MV_CC_ReconstructImage()</a>, the entire image can be split and each image under exposure can be outputted.</div><div> </div><div>The basic steps are as follows:</div><div> <ol>
<li>
Call <a class="el" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga2daf898feb1afa4bd5de232d85a33780" title="Get the value of camera Enum type node.">MV_CC_GetEnumValue()</a> to get the value of node “MultiLightControl”, namely the number of exposure of the current camera. <dl class="section attention"><dt>Attention</dt><dd><ul>
<li>
Some cameras may lack the node “MultiLightControl”, so you need to configure it according to the real number of exposure. </li>
<li>
In the HB (high bandwidth) mode, the value of node “MultiLightControl” needs to be converted for effective exposure number. </li>
</ul>
</dd></dl>
</li>
<li>
If image acquired is HB image, call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#gaf4afd4daffefd78f3b044f26d6151c33" title="Decode lossless compression stream into raw data.">MV_CC_HB_Decode()</a> for HB decoding. </li>
<li>
Call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga572580f794971d54980480eaf62180b7" title="Reconstruct the image (for time-division exposure).">MV_CC_ReconstructImage()</a> to reconstruct image. </li>
</ol>
</div><div>The sample code is as follows:</div><div> <div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> m_nMultiLightNum = 0;  <span class="comment">//Get multiple groups of exposure number</span></div><div class="line"><a class="code" href="struct_m_v_c_c___e_n_u_m_v_a_l_u_e.html">MVCC_ENUMVALUE</a> stEnumValue = {0};</div><div class="line"><span class="keywordtype">int</span> nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga2daf898feb1afa4bd5de232d85a33780">MV_CC_GetEnumValue</a>(handle, <span class="stringliteral">&quot;MultiLightControl&quot;</span>, &amp;stEnumValue);</div><div class="line">Check(nRet);</div><div class="line"></div><div class="line">m_nMultiLightNum=stEnumValue.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>;</div><div class="line"></div><div class="line">nRet = <a class="code" href="group___xE5_xB1_x9E_xE6_x80_xA7_xE9_x85_x8D_xE7_xBD_xAE.html#ga2daf898feb1afa4bd5de232d85a33780">MV_CC_GetEnumValue</a>(handle, <span class="stringliteral">&quot;ImageCompressionMode&quot;</span>, &amp;stEnumValue);</div><div class="line">Check(nRet);</div><div class="line"><span class="keywordflow">if</span> (2 == stEnumValue.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga83b19189b7bee89a25ea1f31e96e46e5">nCurValue</a>) <span class="comment">//Turn on HB mode</span></div><div class="line">{</div><div class="line">    <span class="comment">/*Conversion logic of exposure number:</span></div><div class="line"><span class="comment">    Currently, the number of lights defined in the firmware HB starts from 0x10, and the actual number of lights is acquired from the lower four bits of the byte.*/</span></div><div class="line">    m_nMultiLightNum = m_nMultiLightNum &amp; 0xF;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*In the HB mode, the HB images need to be decoded. Refer to the chapter “Decode Image” before reconstructing image.*/</span></div><div class="line">}</div><div class="line"><a class="code" href="struct_m_v___r_e_c_o_n_s_t_r_u_c_t___i_m_a_g_e___p_a_r_a_m.html">MV_RECONSTRUCT_IMAGE_PARAM</a> stImgReconstructionParam ;</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImageBufferList[8] = {0};</div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 8; k++)</div><div class="line">{</div><div class="line">    pImageBufferList[k] = NULL;</div><div class="line">}</div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gabbc1b35442c6143931edc0189a3432fb">nWidth</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga523c75b72da2a3bb32b97032f86c4703">nWidth</a>;</div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2e4c6b811457a16b7033af6741cfb1db">nHeight</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga33071a62b54a3c9a671a0fcbe4804f1a">nHeight</a>;</div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadea006ae805402cd96d9f8548235da30">enPixelType</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gadea006ae805402cd96d9f8548235da30">enPixelType</a>;</div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga05701d86c4ae0bb4955dbb4bfbafebee">pSrcData</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad09dec12abbdf5f6b77c47105e7eaaa9">pBufAddr</a>;</div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga788363fe94292a9095c3db98ca86e355">nSrcDataLen</a> = stOutFrame.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gad6d9155e189b8aab2a81609a8b33c6dc">nFrameLen</a>;</div><div class="line"><span class="comment">/*Number of exposure*/</span></div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga82f93fbb210b4b784a61ffd998a33b2c">nExposureNum</a> = m_nMultiLightNum;</div><div class="line">stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gac9fd399a973a48361484eb6c84fe1050">enReconstructMethod</a> = <a class="code" href="group___xE6_x9E_x9A_xE4_xB8_xBE_xE7_xB1_xBB_xE5_x9E_x8B_xE5_xAE_x9A_xE4_xB9_x89.html#ggaad679b38955d344ab9e8af885398e5c4a2ba835243b2d219af5991afe90f3b7b3">MV_SPLIT_BY_LINE</a>;</div><div class="line"><span class="comment">/*Length after reconstructing*/</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>   nImageBufferSize = stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga788363fe94292a9095c3db98ca86e355">nSrcDataLen</a> / m_nMultiLightNum;;</div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; m_nMultiLightNum; i++)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (pImageBufferList[i])</div><div class="line">    {</div><div class="line">        free(pImageBufferList[i]);</div><div class="line">        pImageBufferList[i] = NULL;</div><div class="line">    }</div><div class="line">    pImageBufferList[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(nImageBufferSize);</div><div class="line">    <span class="keywordflow">if</span> (NULL != pImageBufferList[i])</div><div class="line">    {</div><div class="line">        stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga557c35e0d3ed44b74b8e69030d1ec4f2">stDstBufList</a>[i].<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaf6e43bc48dc04d4a324955754d6fd32a">pBuf</a> = pImageBufferList[i];</div><div class="line">        stImgReconstructionParam.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga557c35e0d3ed44b74b8e69030d1ec4f2">stDstBufList</a>[i].<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6a217c7e4feb9d762868f834a73a967a">nBufSize</a> = nImageBufferSize;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="group___xE9_x80_x9A_xE7_x94_xA8_xE9_x94_x99_xE8_xAF_xAF_xE7_xA0_x81.html#ga2636578dc5c2f4b830e78f42c3d168bb">MV_E_RESOURCE</a>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE5_xA4_x84_xE7_x90_x86.html#ga572580f794971d54980480eaf62180b7">MV_CC_ReconstructImage</a>(handle, &amp;stImgReconstructionParam);</div><div class="line">Check(nRet);</div></div><!-- fragment --></div><div> </div>  </li>
<li>
<div> <b>Divide Image via Frame Grabber</b> </div><div>When dividing images by frame grabber, you can use SubImageList in structure <a class="el" href="struct_m_v___f_r_a_m_e___o_u_t___i_n_f_o___e_x.html" title="Output frame Information.">MV_FRAME_OUT_INFO_EX</a> to get subimages after image division. The sample program is as follows: <dl class="section note"><dt>Note</dt><dd>Only some frame grabber models support image division feature. For supported models, the actual products shall prevail.</dd></dl>
</div><div> <div class="fragment"><div class="line"><a class="code" href="struct_m_v___f_r_a_m_e___o_u_t.html">MV_FRAME_OUT</a> stFrameOut = { 0 };</div><div class="line">    <span class="keywordtype">int</span> nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#ga33331585a4e2a64653b74af66157a6d8">MV_CC_GetImageBuffer</a>(pUser, &amp;stFrameOut, 1000);</div><div class="line">    <span class="keywordflow">if</span> (nRet == <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (stFrameOut.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6682393ae51d2e540f6454b47eb291a1">nSubImageNum</a> &gt; 0)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; stFrameOut.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga6682393ae51d2e540f6454b47eb291a1">nSubImageNum</a>; ++i)</div><div class="line">            {</div><div class="line">                <a class="code" href="struct_m_v___c_c___i_m_a_g_e.html">MV_CC_IMAGE</a>* pSubImage = &amp;stFrameOut.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2587481f4ebfe4e2dcc78f073978772a">stFrameInfo</a>.<a class="code" href="union_m_v___f_r_a_m_e___o_u_t___i_n_f_o___e_x_1_1_sub_image_list.html">SubImageList</a>.<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga74d4e294212bf74626cc41504ca63f44">pstSubImage</a>[i];</div><div class="line"></div><div class="line">                printf(<span class="stringliteral">&quot;SubImage buffer[%p], size[%d]\n&quot;</span>, pSubImage-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga0d04695d82775f55e4d7ed51c8c983e2">pImageBuf</a>, pSubImage-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga66221b01016cb3c382b9fe843c53b609">nImageLen</a>);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#gaeff416b2d35df148fa2e63521d8847d3">MV_CC_FreeImageBuffer</a>(pUser, &amp;stFrameOut);</div><div class="line">    }</div></div><!-- fragment --> </div>    <div> <br />
 <br />
 <br />
 <table width="60%">
<tr>
<td>Previous: <a class="el" href="_xE9_x87_x87_xE9_x9B_x86_xE5_x9B_xBE_xE5_x83_x8F.html">Image Acquisition</a> </td><td>Next: None  </td></tr>
</table>
</div>  </li>
</ul>
</div></div></div></div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>