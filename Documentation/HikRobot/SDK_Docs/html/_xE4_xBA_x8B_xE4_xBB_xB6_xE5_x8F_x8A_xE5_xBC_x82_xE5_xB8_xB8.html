<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="custom-style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
	<div style="overflow: hidden;">
		<div style="height: 57px;min-width: 1039px;background-size: auto 100%;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABwgAAAABCAYAAADKO/rAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABRSURBVFhH7dUxCoBADEXB5LK5/w1iIaLIrsgWNs50Sf/4WVUd8HOZGd1nCqMbGNMPrNMPrJv1cvz0A3OjfuwPvDPrxf7A7t7IlX7gmX74VsQGguw4S6+UnSYAAAAASUVORK5CYII=');">
			<img src="titleleft.png" style="float: left;"/>
			<img src="titleright.png" alt="" style="float: right;" />
		</div>
	</div>
<!-- Generated by Doxygen 1.8.15 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home&#160;Page</span></a></li>
      <li><a href="_xE5_x8F_x91_xE7_x89_x88_xE8_xAF_xB4_xE6_x98_x8E.html"><span>Release&#160;Notes</span></a></li>
      <li><a href="_xE7_x8E_xAF_xE5_xA2_x83_xE9_x85_x8D_xE7_xBD_xAE.html"><span>Environment&#160;Configuration</span></a></li>
      <li><a href="_xE7_xBC_x96_xE7_xA8_x8B_xE5_xBC_x95_xE5_xAF_xBC.html"><span>Programming&#160;Guide</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="_xE7_x9B_xB8_xE6_x9C_xBA_xE5_x8F_x82_xE6_x95_xB0_xE8_x8A_x82_xE7_x82_xB9_xE8_xA1_xA8.html"><span>Camera&#160;Parameter&#160;Node&#160;Table</span></a></li>
      <li><a href="_xE7_xA4_xBA_xE4_xBE_x8B_xE7_xA8_x8B_xE5_xBA_x8F_xE6_xA6_x82_xE8_xA7_x88.html"><span>Sample&#160;Program&#160;Overview</span></a></li>
      <li><a href="_xE5_xB8_xB8_xE8_xA7_x81_xE9_x97_xAE_xE9_xA2_x98.html"><span>FAQs</span></a></li>
      <li><a href="_xE6_xB3_x95_xE5_xBE_x8B_xE5_xA3_xB0_xE6_x98_x8E.html"><span>Disclaimer</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><div class="header" style="margin-left:-12px;margin-top:-10px;margin-right:-8px;"> <div class="headertitle"> <div class="title">Event and Exception</div> </div> </div> <p>There are 2 types of SDK events: normal notification events and exception alarm events.</p>
<ul>
<li>
<p class="startli">The normal notification events are sent when frame grabbers or cameras are in normal condition. Based on event generation conditions, operations to report events vary. </p>
<p class="interli"></p>
<p class="interli">Some events are only triggered when cameras or cameras connected to frame grabbers start grabbing images. To report these events to the program, you should first subscribe to and enable the specified events, and call <a class="el" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#ga78728211c47c6f118110fde635d6ac69" title="Start grabbing images.">MV_CC_StartGrabbing()</a> to start grabbing images. Other events can be reported to the program without grabbing images. To report these events to the program, you should subscribe to and enable the specified events.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli">The exception alarm events are sent when errors occur in the SDK and can be acquired directly from the SDK. These events are to notify users of exceptions during frame grabber or camera running (e.g., camera offline) so that users can perform troubleshooting in time. </p>
<p class="interli"></p>
<p class="interli">When cameras or frame grabbers are open, custom exception alarm event processing function can be registered. After registration, when exception alarm is generated, the device will automatically execute custom exception alarm processing function.</p>
<p class="endli"></p>
</li>
</ul>
<div> <div id="eventGrab"> <div class="mainparams"> <h2 id="事件采集">Event Acquisition</h2>
</div></div></div><div><div id="eventGrab"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div><div><div id="eventGrab"><div class="subparamswhite">The normal notification event handling process: subscribe to event, enable event, get event, disable event, and unsubscribe from event.</div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <dl class="section note"><dt>Note</dt><dd>To get the normal notification events, configure camera or frame grabber via the client. <ul>
<li>
For more details of camera configuration, refer to the client user manual. </li>
<li>
Frame grabber events can be configured via the frame grabber event configuration tool. </li>
</ul>
</dd></dl>
<ol>
<li>
<p class="startli"></p>
<p class="interli"><b>Subscribe to Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaef606cb8e2e0bf249ec80ef1255e834b" title="Register callback for single event, which is called after the device is opened.">MV_CC_RegisterEventCallBackEx()</a> to subscribe to a specified event. Configure the event name strEventName when calling this API. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Enable Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga21ff79ee2297cbe0374464343d787f8f" title="Enable specified event of device.">MV_CC_EventNotificationOn()</a> to enable the specified event. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Get Event</b>: When the frame grabber or camera generates an event, the SDK will trigger the corresponding event callback function and push the event information to users. The pushed event information usually contains key information such as the event name, event ID, and timestamp, but not necessarily others such as frame No. and event data. Information contained in different events might vary, and the actual condition shall prevail.</p>
<dl class="section attention"><dt>Attention</dt><dd>Avoid calling the event callback function for operations that require more time, otherwise the subsequent event information push will be blocked.</dd></dl>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Close Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gab8cf38e9e3efa37339453c8c86c87e91" title="Disable specified event of device.">MV_CC_EventNotificationOff()</a> to close the specified event. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Unsubscribe from Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaef606cb8e2e0bf249ec80ef1255e834b" title="Register callback for single event, which is called after the device is opened.">MV_CC_RegisterEventCallBackEx()</a> to unsubscribe from the event. Configure strEventName when calling this API, and set the event callback pointer. After a successful calling, you can unsubscribe from the specified event. </p>
<p class="endli"></p>
</li>
</ol>
</div></div></div><div><div id="eventGrab"><div class="subparamswhite">The following sample code shows the process of camera exposure end event.</div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment">// Event callback function</span></div><div class="line"><span class="keywordtype">void</span> __stdcall EventCallBack(<a class="code" href="struct_m_v___e_v_e_n_t___o_u_t___i_n_f_o.html">MV_EVENT_OUT_INFO</a> * pEventInfo, <span class="keywordtype">void</span>* pUser)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (pEventInfo)</div><div class="line">    {</div><div class="line">        __int64 nBlockId = pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga9df6b2cca06c4fd0a4812cc037f1639e">nBlockIdHigh</a>;</div><div class="line">        nBlockId = (nBlockId &lt;&lt; 32) + pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga41ad25f1ab6f18ccfbf98a6781f9f636">nBlockIdLow</a>;</div><div class="line">        __int64 nTimestamp = pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga49956ae9753c62a986aab9d5fe55c770">nTimestampHigh</a>;</div><div class="line">        nTimestamp = (nTimestamp &lt;&lt; 32) + pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2afc62303be6a9adc2bb042bb944263d">nTimestampLow</a>;</div><div class="line">        </div><div class="line">        printf(<span class="stringliteral">&quot;EventName[%s], EventID[%u], BlockId[%I64d], Timestamp[%I64d]\n&quot;</span>, </div><div class="line">        pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga68c4512382aab7af7afead8077ce03cc">EventName</a>, pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaf2d4fb0624cf2c9879244dfa8ad2630e">nEventID</a>,nBlockId,nTimestamp);</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> nRet = <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>;</div><div class="line">    </div><div class="line">    <span class="comment">// Initialize SDK after running the program</span></div><div class="line">    <a class="code" href="group___s_d_k_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga768544eb6e6435313dd99ee9cf92d59d">MV_CC_Initialize</a>() ;</div><div class="line">    </div><div class="line">    <span class="comment">// Enumerate devices, and create camera instance</span></div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment">//Open camera</span></div><div class="line">    nRet = <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga308c9a9869be7a457d27aadd94ce57dd">MV_CC_OpenDevice</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Subscribe to camera exposure end event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaef606cb8e2e0bf249ec80ef1255e834b">MV_CC_RegisterEventCallBackEx</a>(handle, <span class="stringliteral">&quot;ExposureEnd&quot;</span>, EventCallBack, handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Enable the exposure end event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga21ff79ee2297cbe0374464343d787f8f">MV_CC_EventNotificationOn</a> (handle,<span class="stringliteral">&quot;ExposureEnd&quot;</span>);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Start grabbing images</span></div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#ga78728211c47c6f118110fde635d6ac69">MV_CC_StartGrabbing</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// End grabbing images </span></div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#gae5d7f4ae46a53851f104e26fa449ab06">MV_CC_StopGrabbing</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Disable camera exposure end event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gab8cf38e9e3efa37339453c8c86c87e91">MV_CC_EventNotificationOff</a> (handle,<span class="stringliteral">&quot;ExposureEnd&quot;</span>);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Subscribe to camera exposure end event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaef606cb8e2e0bf249ec80ef1255e834b">MV_CC_RegisterEventCallBackEx</a>(handle, <span class="stringliteral">&quot;ExposureEnd&quot;</span>, NULL, handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Close the device</span></div><div class="line">    nRet = <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga33853bd328f46492102246ca8b645d57">MV_CC_CloseDevice</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Destroy the handle</span></div><div class="line">    nRet = <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga0f74372a22e8a19fa7e21dad45070428">MV_CC_DestroyHandle</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Deinitialize SDK</span></div><div class="line">    <a class="code" href="group___s_d_k_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#gafa1820a0da8671fc6f77dc9a7dfa69d3">MV_CC_Finalize</a>();</div><div class="line">    </div><div class="line">    <span class="keywordflow">return</span> nRet;</div><div class="line">}</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>For sample code of enumerating devices and creating camera instance, refer to the chapter <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE7_x9B_xB8_xE6_x9C_xBA.html">Camera Initialization</a>. <br />
</dd></dl>
</div></div></div><div><div id="eventGrab"><div class="subparamswhite">The following sample code shows the process of frame grabber frame start event.</div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment">// Event callback function</span></div><div class="line"><span class="keywordtype">void</span> __stdcall EventCallBack(<a class="code" href="struct_m_v___e_v_e_n_t___o_u_t___i_n_f_o.html">MV_EVENT_OUT_INFO</a> * pEventInfo, <span class="keywordtype">void</span>* pUser)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (pEventInfo)</div><div class="line">    {</div><div class="line">        __int64 nBlockId = pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga9df6b2cca06c4fd0a4812cc037f1639e">nBlockIdHigh</a>;</div><div class="line">        nBlockId = (nBlockId &lt;&lt; 32) + pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga41ad25f1ab6f18ccfbf98a6781f9f636">nBlockIdLow</a>;</div><div class="line">        __int64 nTimestamp = pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga49956ae9753c62a986aab9d5fe55c770">nTimestampHigh</a>;</div><div class="line">        nTimestamp = (nTimestamp &lt;&lt; 32) + pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga2afc62303be6a9adc2bb042bb944263d">nTimestampLow</a>;</div><div class="line">        printf(<span class="stringliteral">&quot;EventName[%s], EventID[%u], BlockId[%I64d], Timestamp[%I64d]\n&quot;</span>, </div><div class="line">        pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#ga68c4512382aab7af7afead8077ce03cc">EventName</a>, pEventInfo-&gt;<a class="code" href="group___xE7_xBB_x93_xE6_x9E_x84_xE4_xBD_x93_xE5_xAE_x9A_xE4_xB9_x89.html#gaf2d4fb0624cf2c9879244dfa8ad2630e">nEventID</a>,nBlockId,nTimestamp);</div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> nRet = <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>;</div><div class="line">    <span class="comment">// Initialize SDK after running the program</span></div><div class="line">    <a class="code" href="group___s_d_k_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga768544eb6e6435313dd99ee9cf92d59d">MV_CC_Initialize</a>() ;</div><div class="line">    </div><div class="line">    <span class="comment">// Enumerate devices, and create frame grabber instance</span></div><div class="line">    </div><div class="line">    </div><div class="line">    <span class="comment">// Open the frame grabber</span></div><div class="line">    nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#gac57264660ca9acb36a43c23adb2147a7">MV_CC_OpenInterface</a>(hInterface, NULL);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Subscribe to frame grabber frame start event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaef606cb8e2e0bf249ec80ef1255e834b">MV_CC_RegisterEventCallBackEx</a>(hInterface, <span class="stringliteral">&quot;FrameStart&quot;</span>, EventCallBack, hInterface);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Start frame grabber frame start event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga21ff79ee2297cbe0374464343d787f8f">MV_CC_EventNotificationOn</a> (hInterface,<span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Other processes </span></div><div class="line">    </div><div class="line">    <span class="comment">// Close the frame grabber frame start event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gab8cf38e9e3efa37339453c8c86c87e91">MV_CC_EventNotificationOff</a> (hInterface,<span class="stringliteral">&quot;ReceiveImageFrameStart0&quot;</span>);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Unsubscribe from frame grabber frame start event</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#gaef606cb8e2e0bf249ec80ef1255e834b">MV_CC_RegisterEventCallBackEx</a>(hInterface, <span class="stringliteral">&quot;FrameStart&quot;</span>, NULL, hInterface);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Close the device</span></div><div class="line">    nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga98f4a5025eebf615499a23da0b73970d">MV_CC_CloseInterface</a>(hInterface);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Destroy the handle</span></div><div class="line">    nRet = <a class="code" href="group___xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga365d684482405b74afe9d21b986185af">MV_CC_DestroyInterface</a>(hInterface);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Deinitialize SDK</span></div><div class="line">    <a class="code" href="group___s_d_k_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#gafa1820a0da8671fc6f77dc9a7dfa69d3">MV_CC_Finalize</a>();</div><div class="line">    </div><div class="line">    <span class="keywordflow">return</span> nRet;</div><div class="line">}</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>For sample code of enumerating devices and creating frame grabber instance, refer to the chapter <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE9_x87_x87_xE9_x9B_x86_xE5_x8D_xA1.html">Frame Grabber Initialization</a>. <br />
  </dd></dl>
<div id="abnormal"> <div class="mainparams"> <h2 id="异常告警事件">Exception Alarm Events</h2>
</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="abnormal"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="abnormal"><div class="subparamswhite">Exception alarm events can be obtained directly from the SDK. The handling process of these events: register event, get event, and cancel event.</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="abnormal"><div class="subparamswhite"> <ol>
<li>
<p class="startli"></p>
<p class="interli"><b>Register Event</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga5ba31ad90b74fe9a8ce4d4199164ba51" title="Register callback for receiving exception, which is called after the device is opened.">MV_CC_RegisterExceptionCallBack()</a> to register exception event. Exception will be reported to SDK. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Get Event</b>: When exception occurs in SDK, event callback function will be triggered, pushing exception alarm event to the user. </p>
<dl class="section attention"><dt>Attention</dt><dd>Time-consuming operations are not recommended in the exception event callback function, otherwise the subsequent event information push will be blocked. </dd></dl>
</li>
<li>
<p class="startli"></p>
<p class="interli"><b>Deregister</b>: Call <a class="el" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga5ba31ad90b74fe9a8ce4d4199164ba51" title="Register callback for receiving exception, which is called after the device is opened.">MV_CC_RegisterExceptionCallBack()</a> to deregister exception alarm event. When exception callback function is null, exception event of frame grabber or camera instance can be canceled. </p>
<p class="interli"></p>
<p class="interli">The following sample code shows how to subscribe to, handle, and unsubscribe from event.</p>
<div class="fragment"><div class="line"><span class="comment">// Exception event callback function</span></div><div class="line"><span class="keywordtype">void</span> __stdcall ExceptionCallBack (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMsgType, <span class="keywordtype">void</span>* pUser)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(nMsgType == <a class="code" href="group___xE5_xAE_x8F_xE5_xAE_x9A_xE4_xB9_x89.html#gabc7a5d3d85a08c80642bd526db563aa4">MV_EXCEPTION_DEV_DISCONNECT</a>)</div><div class="line">    {</div><div class="line">        printf(<span class="stringliteral">&quot;ExceptionCallBack Recv Type[%d]\n&quot;</span>, nMsgType);</div><div class="line">        <span class="comment">// Handle exception, such as closing camera, destroying handle, enumerating camera again, and opening camera</span></div><div class="line">    }</div><div class="line">}</div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> nRet = <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>;</div><div class="line">    <span class="keywordtype">int</span> nRet = <a class="code" href="group___xE6_xAD_xA3_xE7_xA1_xAE_xE7_xA0_x81.html#gacc4f15d534603b339f751d8b2d569305">MV_OK</a>;</div><div class="line">    <span class="comment">// Initialize SDK after running the program</span></div><div class="line">    <a class="code" href="group___s_d_k_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga768544eb6e6435313dd99ee9cf92d59d">MV_CC_Initialize</a>() ;</div><div class="line"></div><div class="line">        </div><div class="line">    <span class="comment">// Enumerate devices, and create instance</span></div><div class="line">    </div><div class="line"></div><div class="line">    <span class="comment">//Open camera</span></div><div class="line">    nRet = <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga308c9a9869be7a457d27aadd94ce57dd">MV_CC_OpenDevice</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Register exception callback</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga5ba31ad90b74fe9a8ce4d4199164ba51">MV_CC_RegisterExceptionCallBack</a> (handle, ExceptionCallBack, handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Start grabbing images </span></div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#ga78728211c47c6f118110fde635d6ac69">MV_CC_StartGrabbing</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// End grabbing images</span></div><div class="line">    nRet = <a class="code" href="group___xE5_x9B_xBE_xE5_x83_x8F_xE9_x87_x87_xE9_x9B_x86.html#gae5d7f4ae46a53851f104e26fa449ab06">MV_CC_StopGrabbing</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Deregister exception callback</span></div><div class="line">    nRet = <a class="code" href="group___xE4_xBA_x8B_xE4_xBB_xB6_xE5_x8F_x8A_xE5_xBC_x82_xE5_xB8_xB8.html#ga5ba31ad90b74fe9a8ce4d4199164ba51">MV_CC_RegisterExceptionCallBack</a> (handle, NULL, handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Close the device</span></div><div class="line">    nRet = <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga33853bd328f46492102246ca8b645d57">MV_CC_CloseDevice</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Destroy the handle</span></div><div class="line">    nRet = <a class="code" href="group___xE7_x9B_xB8_xE6_x9C_xBA_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#ga0f74372a22e8a19fa7e21dad45070428">MV_CC_DestroyHandle</a>(handle);</div><div class="line">    Check(nRet);</div><div class="line">    </div><div class="line">    <span class="comment">// Deinitialize SDK</span></div><div class="line">    <a class="code" href="group___s_d_k_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96.html#gafa1820a0da8671fc6f77dc9a7dfa69d3">MV_CC_Finalize</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>For sample code of enumerating devices and creating camera instance, refer to the chapter <a class="el" href="_xE5_x88_x9D_xE5_xA7_x8B_xE5_x8C_x96_xE7_x9B_xB8_xE6_x9C_xBA.html">Camera Initialization</a>. </dd></dl>
</li>
</ol>
</div> </div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div id="cache"> <div class="mainparams"> <h2 id="事件缓存调节">Adjust Event Buffer</h2>
</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="cache"><div class="mainparams"> </div> <div class="subparamswhite"> </div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="cache"><div class="subparamswhite">Event generated by GigE camera uses socket buffer area, and there is no need to configure extra buffer area. Event generated by U3V device is reported via event endpoint or link. There are 5 buffer nodes by default for receiving event in SDK. Slow software processing in the upper layer and high frequency event-reporting may result in insufficient SDK buffer, leading to event loss. You can edit the number of event buffer nodes in U3V camera SDK by calling <a class="el" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#ga54f98a479ef686d954022805d45af167" title="Set the number of event buffer nodes for U3V cameras.">MV_USB_SetEventNodeNum()</a>.</div></div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"><div id="cache"><div class="subparamswhite"> <div class="fragment"><div class="line"><span class="comment">// Set number of event buffer nodes of U3V camera in SDK</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nEventNodeNum = 5;</div><div class="line">nRet = <a class="code" href="group___u3_v_xE7_x9B_xB8_xE6_x9C_xBA.html#ga54f98a479ef686d954022805d45af167">MV_USB_SetEventNodeNum</a>(handle, nEventNodeNum);</div><div class="line">Check(nRet);</div></div><!-- fragment --> </div> </div></div></div></div><div><div id="eventGrab"><div class="subparamswhite"> <div> <br />
 <br />
 <br />
 <table width="60%">
<tr>
<td>Previous: <a class="el" href="_xE8_xAE_xBE_xE7_xBD_xAE_xE5_x8F_x82_xE6_x95_xB0.html">Parameter Configuration</a> </td><td>Next: <a class="el" href="_xE9_x87_x87_xE9_x9B_x86_xE5_x9B_xBE_xE5_x83_x8F.html">Image Acquisition</a>  </td></tr>
</table>
</div> </div> </div></div></div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<div class="footer" style="text-align: right;">
	<hr/>
	<small></small>
</div>
</body>
</html>